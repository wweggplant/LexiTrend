# Story 3.2: 调用真实 Gemini API 获取关键词洞察以替代假数据

## Status: Review

## Story

- As a 用户
- I want 在我选择一个关键词后，我想**调用真实的 Gemini API (使用我自己的 Key) 来获取"定义"和"文化背景"**
- so that 我可以获得真实、有价值的分析结果，而不是无用的占位符数据

## Acceptance Criteria (ACs)

1.  [x] 在侧边栏应用接收到新关键词后，会调用 `apiService.analyzeKeyword()` 方法。
2.  [x] `ApiService` 会成功使用用户存储的 API Key 和语言偏好，向 Gemini API 发起请求。
3.  [x] API 返回的结构化数据（包含 `definition` 和 `culturalContext`）被成功接收。
4.  [x] `side-panel-app.tsx` 的 state 会被更新，用 API 返回的真实数据替换掉假数据。
5.  [x] UI 会被重新渲染，在 `InsightCard` 组件中展示出真实的定义和文化背景。
6.  [x] 所有硬编码的假数据（如 '人工智能', '区块链' 等）将从最终的 UI 代码中移除。

## Tasks / Subtasks

- [x] **Task 1: 在 UI 层触发 API 调用**
  - [x] 在 `side-panel-app.tsx` 中，当接收到新的关键词时（在 `messageListener` 或其他处理器中），设置 `isLoading`为 `true`。
  - [x] 调用一个封装好的数据获取函数，例如 `handleFetchInsight(keyword)`。
  - [x] 在 `handleFetchInsight` 中，调用 `apiService.analyzeKeyword(keyword)`。

- [x] **Task 2: 实现数据状态管理**
  - [x] 创建一个新的 React state，例如 `const [insight, setInsight] = useState<InsightResponse | null>(null);` 用于存储 API 返回的结果。
  - [x] 在 API 调用成功后，使用 `setInsight(response)` 来更新 state。
  - [x] 在 API 调用结束后（无论成功或失败），设置 `isLoading` 为 `false`。

- [x] **Task 3: 更新 UI 组件以展示真实数据**
  - [x] 修改 `InsightCard.tsx` 组件，使其接收 `insight` 对象作为 prop。
  - [x] 在 `InsightCard.tsx` 内部，将写死的文本替换为 `props.insight.definition` 和 `props.insight.culturalContext`。
  - [x] 确保在 `insight` 为 `null` 时（即初始状态或返回主界面时），`InsightCard` 不会渲染或渲染一个空状态。

- [x] **Task 4: 清理假数据和模拟逻辑**
  - [x] 移除 `side-panel-app.tsx` 中用于模拟 API 调用的 `setTimeout`。
  - [x] 移除所有在 UI 代码中硬编码的关键词列表和洞察文本。 